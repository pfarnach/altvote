<!-- <a ui-sref='home1'>Back to Home</a> -->
<div class="create-ballot" layout="row" ng-if="!resultsByRound.length">
    <div flex="33" class="create-left">
        <h4>{{ ballot.name }}</h4>
        <p>{{ ballot.description }}</p>
    </div>
    <div flex class="create-right">
        <div ng-if="!readOnly">
            <div layout="row" class="table-head">
              <div flex="15">Ranking</div>
              <div flex flex-offset="5">Options</div>
            </div>
            <div ng-repeat="option in options" layout="row">
                <md-select ng-init="selected[$index].rank = availableRanks[0]"
                           ng-model="selected[$index].rank"
                           aria-label="candidate selector"
                           flex="15">
                    <md-option ng-repeat="rank in availableRanks">{{ rank }}</md-option>
                </md-select>
                <div flex flex-offset="5" style="margin-top: 20px; margin-bottom: 26px;">{{ option.name }}</div>
            </div>
            <div class="pull-right">
                <md-button ng-click="getResults()">Get results</md-button>
                <md-button ng-click="validateAnswer()" class="md-raised md-primary">Answer</md-button>
            </div>
            <div ng-show="!form.valid && form.submitted" class="error">
                {{ form.message }}
            </div>
        </div>
    </div>
</div>

<div ng-if="resultsByRound.length" class="create-ballot" layout="row">
    <div flex="33" class="create-left">
        <h4>{{ ballot.name }}</h4>
        <p>{{ ballot.description }}</p>
        <div>Ballots cast: {{ totalBallotsCast }}</div>
    </div>
    <div flex class="create-right">
        <div ng-repeat="resultRound in resultsByRound" class="result-row">
            <h5>Round #{{$index + 1}}</h5>
            <div ng-repeat="result in resultRound" ng-class="{ 'eliminated': result.isEliminated, 'winner': result.isWinner }">
                <span>{{ result.name }}: {{ result.percent_vote === 0 ? 0 : (result.percent_vote * 100 | number : 1) }}%</span>
                <span ng-show="result.isWinner" class="pull-right">Winner</span>
                <span ng-show="result.isEliminated" class="pull-right">Eliminated</span>
            </div>
        </div>
    </div>
</div>
