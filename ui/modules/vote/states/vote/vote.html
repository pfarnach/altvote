<!-- VOTE MODE -->
<div class="create-ballot" layout="row">
    <div flex="33" class="create-left">
        <h4>{{ ballot.name }}</h4>
        <div>{{ ballot.description }}</div>

        <div ng-if="ballot.end_timestamp && !votingClosed">Voting closes on {{ ballot.end_timestamp * 1000 | date: "MM/dd/yyyy 'at' hh:mm a" }}</div>
        <div ng-if="ballot.end_timestamp && votingClosed"><span class="fa fa-hourglass-end"></span> Voting ended on {{ ballot.end_timestamp * 1000 | date: "MM/dd/yyyy 'at' hh:mm a" }}</div>

        <div ng-if="ballot.status === 'DISABLED'">
            <span class="fa fa-warning"></span>
            Voting has been disabled by the ballot's creator
        </div>

        <div ng-if="totalBallotsCast">Total votes cast: {{ totalBallotsCast }}</div>
    </div>

    <!-- VOTE MODE -->
    <div ng-hide="readOnly || alreadyVoted" flex class="create-right">
        <div layout="row" class="table-head">
          <div flex="15">Ranking</div>
          <div flex flex-offset="5">Options</div>
        </div>
        <div ng-repeat="option in options | orderBy: 'isWriteIn'" layout="row">
            <md-select ng-init="selected[$index].rank = availableRanks[0]"
                       ng-model="selected[$index].rank"
                       aria-label="candidate selector"
                       flex="15">
                <md-option ng-repeat="rank in availableRanks">{{ rank }}</md-option>
            </md-select>
            <div flex flex-offset="5" style="margin-top: 20px; margin-bottom: 26px;">{{ option.name }}</div>
        </div>
        <div layout="row">
            <md-input-container>
                <label>Write-In Name</label>
                <input ng-model="writeIn.name">
                <div ng-show="writeInForm.show">{{ writeInForm.msg }}</div>
                <md-button class="md-fab md-primary" ng-click="addWriteIn(writeIn)"><span class="fa fa-plus-circle"></span></md-button>
            </md-input-container>
            
        </div>
        <div class="pull-right">
            <md-button ng-click="seeResults()">See Results</md-button>
            <md-button ng-click="validateAnswer()" ng-disabled="form.submitted" class="md-raised md-warn">
                <span class="fa fa-check-square-o"></span>
                Answer
            </md-button>
        </div>
        <div ng-show="!form.valid && form.submitted" class="error">
            {{ form.message }}
        </div>
    </div>

    <!-- READ ONLY MODE -->
    <div ng-if="resultsByRound && (readOnly || alreadyVoted)" flex class="create-right">
        <div ng-repeat="resultRound in resultsByRound" class="result-row">
            <h5>Round #{{ $index + 1 }}</h5>
            <div ng-repeat="result in resultRound" ng-class="{ 'eliminated': result.isEliminated, 'winner': result.isWinner }">
                <span>{{ result.name }}: {{ result.percent_vote === 0 ? 0 : (result.percent_vote * 100 | number : 1) }}%</span>
                <span ng-show="result.isWinner" class="pull-right">
                    <span class="fa fa-check-circle"></span>
                    Winner
                </span>
                <span ng-show="result.isEliminated" class="pull-right">
                    <span class="fa fa-times"></span>
                    Eliminated
                </span>
            </div>
        </div>
        <div class="pull-right" ng-hide="alreadyVoted || ballot.status === 'DISABLED'">
            <md-button ng-click="hideResults()">
                <span class="fa fa-arrow-circle-o-left"></span>
                Back to Voting
            </md-button>
        </div>
    </div>
</div>
